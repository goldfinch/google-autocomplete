(function(g){window.googleFieldsInit=()=>{console.log("google init")},g.entwine("ss",function(e){e("[data-goldfinch-google-place-field]").entwine({onmatch:function(){console.log("place entwine");var n=e(this).find('[data-goldfinch-place="address"]')[0],t=e(this).find('[data-goldfinch-place="data"]')[0];const i={componentRestrictions:{country:"nz"},fields:["address_components","geometry","name"],strictBounds:!1},s=new google.maps.places.Autocomplete(n,i);s.addListener("place_changed",()=>{const a=s.getPlace();console.log("place",a),t.value=JSON.stringify(a)})}}),e("[data-goldfinch-google-map-field]").entwine({onmatch:function(){console.log("map entwine");var n=e(this).find('[data-goldfinch-map="latitude"]')[0],t=e(this).find('[data-goldfinch-map="longitude"]')[0],i=e(this).find('[data-goldfinch-map="zoom"]')[0],s=e(this).find('[data-goldfinch-map="frame"]')[0];let a=parseFloat(n.value),c=parseFloat(t.value),d=parseFloat(i.value);d||(d=12),console.log("init vals",a,c,d);let o=new google.maps.Map(s,{center:{lat:a,lng:c},zoom:d,gestureHandling:"cooperative",fullscreenControl:!1,mapTypeControl:!1,clickableIcons:!1,rotateControl:!1,scaleControl:!1,streetViewControl:!1,zoomControl:!1});var r=new google.maps.Marker({position:{lat:a,lng:c},map:o});google.maps.event.addListener(o,"zoom_changed",l=>{i.value=o.getZoom()}),google.maps.event.addListener(o,"click",l=>{r.setPosition(l.latLng),o.panTo(l.latLng),n.value=l.latLng.lat(),t.value=l.latLng.lng()})}})})})(jQuery);
